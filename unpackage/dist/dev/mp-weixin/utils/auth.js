"use strict";const e=require("../common/vendor.js");class i{static isLoggedIn(){return e.index.getStorageSync("isLoggedIn")===!0}static getUserInfo(){return e.index.getStorageSync("userInfo")||null}static setUserInfo(t){e.index.setStorageSync("userInfo",t),e.index.setStorageSync("isLoggedIn",!0)}static clearUserInfo(){e.index.removeStorageSync("userInfo"),e.index.removeStorageSync("isLoggedIn")}static getNickname(){const t=this.getUserInfo();return t?t.nickName:""}static needSetNickname(){const t=this.getUserInfo();return!t||!t.nickName||t.nickName==="微信用户"}static async wechatLogin(){return new Promise((t,s)=>{e.index.getUserProfile({desc:"用于完善用户资料",success:n=>{e.index.__f__("log","at utils/auth.js:59","获取用户信息成功:",n.userInfo),t(n.userInfo)},fail:n=>{e.index.__f__("error","at utils/auth.js:63","获取用户信息失败:",n),s(n)}})})}static logout(){this.clearUserInfo(),e.index.showToast({title:"已退出登录",icon:"success"}),setTimeout(()=>{e.index.reLaunch({url:"/pages/login/login"})},1500)}}exports.Auth=i;
//# sourceMappingURL=../../.sourcemap/mp-weixin/utils/auth.js.map
