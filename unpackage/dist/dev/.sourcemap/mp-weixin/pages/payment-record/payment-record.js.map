{"version":3,"file":"payment-record.js","sources":["pages/payment-record/payment-record.vue","pages/payment-record/payment-record.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"payment-record-container\">\n    <!-- 头部 -->\n    <view class=\"header\">\n      <text class=\"title\">缴费记录</text>\n    </view>\n\n    <!-- 搜索和筛选 -->\n    <view class=\"search-filter\">\n      <view class=\"search-box\">\n        <input\n          class=\"search-input\"\n          placeholder=\"搜索缴费记录\"\n          v-model=\"searchKeyword\"\n          @input=\"onSearchInput\"\n        />\n        <text class=\"search-icon\">🔍</text>\n      </view>\n\n      <view class=\"filter-tabs\">\n        <view\n          class=\"filter-tab\"\n          :class=\"{ active: currentStatus === '' }\"\n          @click=\"filterByStatus('')\"\n        >\n          全部\n        </view>\n        <view\n          class=\"filter-tab\"\n          :class=\"{ active: currentStatus === 'paid' }\"\n          @click=\"filterByStatus('paid')\"\n        >\n          已缴费\n        </view>\n        <view\n          class=\"filter-tab\"\n          :class=\"{ active: currentStatus === 'unpaid' }\"\n          @click=\"filterByStatus('unpaid')\"\n        >\n          未缴费\n        </view>\n      </view>\n    </view>\n\n    <!-- 记录列表 -->\n    <view class=\"record-list\">\n      <view\n        class=\"record-item\"\n        v-for=\"record in filteredRecords\"\n        :key=\"record.id\"\n        @click=\"goToDetail(record)\"\n      >\n        <view class=\"record-header\">\n          <text class=\"record-title\">{{ record.title }}</text>\n          <text class=\"record-status\" :class=\"record.status\">\n            {{ getStatusText(record.status) }}\n          </text>\n        </view>\n\n        <view class=\"record-info\">\n          <view class=\"info-row\">\n            <text class=\"label\">缴费金额：</text>\n            <text class=\"amount\">¥{{ formatAmount(record.amount) }}</text>\n          </view>\n          <view class=\"info-row\">\n            <text class=\"label\">缴费时间：</text>\n            <text class=\"time\">{{ formatDate(record.paymentTime) }}</text>\n          </view>\n          <view class=\"info-row\">\n            <text class=\"label\">订单号：</text>\n            <text class=\"order-no\">{{ record.orderNo }}</text>\n          </view>\n        </view>\n\n        <view class=\"record-footer\">\n          <text class=\"detail-text\">点击查看详情 ></text>\n        </view>\n      </view>\n\n      <!-- 空状态 -->\n      <view class=\"empty-state\" v-if=\"filteredRecords.length === 0\">\n        <text class=\"empty-icon\">📋</text>\n        <text class=\"empty-text\">暂无缴费记录</text>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { formatAmount } from \"@/utils/payment.js\";\n\nexport default {\n  name: \"PaymentRecord\",\n  data() {\n    return {\n      searchKeyword: \"\",\n      currentStatus: \"\",\n      records: [\n        {\n          id: 1,\n          title: \"2024年春季学费\",\n          amount: 500000, // 5000元，以分为单位\n          status: \"paid\",\n          paymentTime: \"2024-03-15 14:30:25\",\n          orderNo: \"PAY202403150001\",\n          description: \"2024年春季学期学费缴纳\",\n        },\n        {\n          id: 2,\n          title: \"2024年住宿费\",\n          amount: 300000, // 3000元\n          status: \"paid\",\n          paymentTime: \"2024-02-28 09:15:10\",\n          orderNo: \"PAY202402280002\",\n          description: \"2024年春季学期住宿费\",\n        },\n        {\n          id: 3,\n          title: \"2024年秋季学费\",\n          amount: 500000, // 5000元\n          status: \"unpaid\",\n          paymentTime: null,\n          orderNo: \"PAY202409010003\",\n          description: \"2024年秋季学期学费\",\n        },\n        {\n          id: 4,\n          title: \"教材费\",\n          amount: 80000, // 800元\n          status: \"paid\",\n          paymentTime: \"2024-03-10 16:45:30\",\n          orderNo: \"PAY202403100004\",\n          description: \"2024年春季教材费用\",\n        },\n        {\n          id: 5,\n          title: \"实验费\",\n          amount: 120000, // 1200元\n          status: \"unpaid\",\n          paymentTime: null,\n          orderNo: \"PAY202403200005\",\n          description: \"2024年春季实验课程费用\",\n        },\n      ],\n    };\n  },\n  computed: {\n    filteredRecords() {\n      let filtered = this.records;\n\n      // 按状态筛选\n      if (this.currentStatus) {\n        filtered = filtered.filter(\n          (record) => record.status === this.currentStatus\n        );\n      }\n\n      // 按关键词搜索\n      if (this.searchKeyword) {\n        const keyword = this.searchKeyword.toLowerCase();\n        filtered = filtered.filter(\n          (record) =>\n            record.title.toLowerCase().includes(keyword) ||\n            record.orderNo.toLowerCase().includes(keyword) ||\n            record.description.toLowerCase().includes(keyword)\n        );\n      }\n\n      // 按时间倒序排列\n      return filtered.sort((a, b) => {\n        if (a.paymentTime && b.paymentTime) {\n          return new Date(b.paymentTime) - new Date(a.paymentTime);\n        }\n        return 0;\n      });\n    },\n  },\n  methods: {\n    formatAmount,\n\n    onSearchInput() {\n      // 搜索输入处理\n    },\n\n    filterByStatus(status) {\n      this.currentStatus = status;\n    },\n\n    getStatusText(status) {\n      const statusMap = {\n        paid: \"已缴费\",\n        unpaid: \"未缴费\",\n        failed: \"缴费失败\",\n      };\n      return statusMap[status] || \"未知状态\";\n    },\n\n    formatDate(dateString) {\n      if (!dateString) return \"待缴费\";\n      const date = new Date(dateString);\n      return date.toLocaleString(\"zh-CN\", {\n        year: \"numeric\",\n        month: \"2-digit\",\n        day: \"2-digit\",\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n      });\n    },\n\n    goToDetail(record) {\n      uni.navigateTo({\n        url: `/pages/payment-detail/payment-detail?id=${record.id}&orderNo=${record.orderNo}`,\n      });\n    },\n    loadPaymentRecords() {\n      // 这里可以调用API获取真实的缴费记录数据\n      // 目前使用模拟数据\n      console.log(\"加载缴费记录\");\n    },\n  },\n\n  onLoad() {\n    // 页面加载时获取缴费记录\n    this.loadPaymentRecords();\n  },\n\n  onShow() {\n    // 页面显示时刷新数据\n    this.loadPaymentRecords();\n  },\n};\n</script>\n\n<style scoped>\n.payment-record-container {\n  padding: 20rpx;\n  background-color: #f5f5f5;\n  min-height: 100vh;\n}\n\n.header {\n  text-align: center;\n  padding: 40rpx 0;\n  background-color: #fff;\n  border-radius: 20rpx;\n  margin-bottom: 20rpx;\n}\n\n.title {\n  font-size: 36rpx;\n  font-weight: bold;\n  color: #333;\n}\n\n.search-filter {\n  background-color: #fff;\n  border-radius: 20rpx;\n  padding: 30rpx;\n  margin-bottom: 20rpx;\n}\n\n.search-box {\n  position: relative;\n  margin-bottom: 30rpx;\n}\n\n.search-input {\n  width: 100%;\n  height: 80rpx;\n  padding: 0 80rpx 0 30rpx;\n  border: 2rpx solid #e0e0e0;\n  border-radius: 40rpx;\n  font-size: 28rpx;\n  background-color: #f8f8f8;\n}\n\n.search-icon {\n  position: absolute;\n  right: 30rpx;\n  top: 50%;\n  transform: translateY(-50%);\n  font-size: 32rpx;\n  color: #999;\n}\n\n.filter-tabs {\n  display: flex;\n  gap: 20rpx;\n}\n\n.filter-tab {\n  flex: 1;\n  height: 60rpx;\n  line-height: 60rpx;\n  text-align: center;\n  background-color: #f0f0f0;\n  border-radius: 30rpx;\n  font-size: 26rpx;\n  color: #666;\n  transition: all 0.3s;\n}\n\n.filter-tab.active {\n  background-color: #007aff;\n  color: #fff;\n}\n\n.record-list {\n  display: flex;\n  flex-direction: column;\n  gap: 20rpx;\n}\n\n.record-item {\n  background-color: #fff;\n  border-radius: 20rpx;\n  padding: 30rpx;\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\n  transition: all 0.3s;\n}\n\n.record-item:active {\n  transform: scale(0.98);\n  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.15);\n}\n\n.record-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20rpx;\n}\n\n.record-title {\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #333;\n}\n\n.record-status {\n  padding: 8rpx 20rpx;\n  border-radius: 20rpx;\n  font-size: 24rpx;\n  font-weight: bold;\n}\n\n.record-status.paid {\n  background-color: #e8f5e8;\n  color: #52c41a;\n}\n\n.record-status.unpaid {\n  background-color: #fff7e6;\n  color: #fa8c16;\n}\n\n.record-status.failed {\n  background-color: #fff2f0;\n  color: #ff4d4f;\n}\n\n.record-info {\n  margin-bottom: 20rpx;\n}\n\n.info-row {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 10rpx;\n  font-size: 26rpx;\n}\n\n.label {\n  color: #666;\n}\n\n.amount {\n  color: #ff6b35;\n  font-weight: bold;\n}\n\n.time {\n  color: #333;\n}\n\n.order-no {\n  color: #999;\n  font-family: monospace;\n}\n\n.record-footer {\n  border-top: 2rpx solid #f0f0f0;\n  padding-top: 20rpx;\n  text-align: center;\n}\n\n.detail-text {\n  color: #007aff;\n  font-size: 26rpx;\n}\n\n.empty-state {\n  text-align: center;\n  padding: 100rpx 0;\n  color: #999;\n}\n\n.empty-icon {\n  font-size: 80rpx;\n  display: block;\n  margin-bottom: 20rpx;\n}\n\n.empty-text {\n  font-size: 28rpx;\n}\n</style>\n","import MiniProgramPage from '/Users/will/Documents/WillProject/Uni-App/bxjf-mini-program/pages/payment-record/payment-record.vue'\nwx.createPage(MiniProgramPage)"],"names":["_sfc_main","filtered","record","keyword","a","b","formatAmount","status","dateString","uni","MiniProgramPage"],"mappings":"2FA2FKA,EAAU,CACb,KAAM,gBACN,MAAO,CACL,MAAO,CACL,cAAe,GACf,cAAe,GACf,QAAS,CACP,CACE,GAAI,EACJ,MAAO,YACP,OAAQ,IACR,OAAQ,OACR,YAAa,sBACb,QAAS,kBACT,YAAa,eACd,EACD,CACE,GAAI,EACJ,MAAO,WACP,OAAQ,IACR,OAAQ,OACR,YAAa,sBACb,QAAS,kBACT,YAAa,cACd,EACD,CACE,GAAI,EACJ,MAAO,YACP,OAAQ,IACR,OAAQ,SACR,YAAa,KACb,QAAS,kBACT,YAAa,aACd,EACD,CACE,GAAI,EACJ,MAAO,MACP,OAAQ,IACR,OAAQ,OACR,YAAa,sBACb,QAAS,kBACT,YAAa,aACd,EACD,CACE,GAAI,EACJ,MAAO,MACP,OAAQ,KACR,OAAQ,SACR,YAAa,KACb,QAAS,kBACT,YAAa,eACd,CACF,EAEJ,EACD,SAAU,CACR,iBAAkB,CAChB,IAAIC,EAAW,KAAK,QAUpB,GAPI,KAAK,gBACPA,EAAWA,EAAS,OACjBC,GAAWA,EAAO,SAAW,KAAK,gBAKnC,KAAK,cAAe,CACtB,MAAMC,EAAU,KAAK,cAAc,YAAW,EAC9CF,EAAWA,EAAS,OACjBC,GACCA,EAAO,MAAM,cAAc,SAASC,CAAO,GAC3CD,EAAO,QAAQ,cAAc,SAASC,CAAO,GAC7CD,EAAO,YAAY,cAAc,SAASC,CAAO,EAEvD,CAGA,OAAOF,EAAS,KAAK,CAACG,EAAGC,IACnBD,EAAE,aAAeC,EAAE,YACd,IAAI,KAAKA,EAAE,WAAW,EAAI,IAAI,KAAKD,EAAE,WAAW,EAElD,CACR,CACF,CACF,EACD,QAAS,cACPE,EAAY,aAEZ,eAAgB,CAEf,EAED,eAAeC,EAAQ,CACrB,KAAK,cAAgBA,CACtB,EAED,cAAcA,EAAQ,CAMpB,MALkB,CAChB,KAAM,MACN,OAAQ,MACR,OAAQ,QAEOA,CAAM,GAAK,MAC7B,EAED,WAAWC,EAAY,CACrB,OAAKA,EACQ,IAAI,KAAKA,CAAU,EACpB,eAAe,QAAS,CAClC,KAAM,UACN,MAAO,UACP,IAAK,UACL,KAAM,UACN,OAAQ,SACV,CAAC,EARuB,KASzB,EAED,WAAWN,EAAQ,CACjBO,EAAAA,MAAI,WAAW,CACb,IAAK,2CAA2CP,EAAO,EAAE,YAAYA,EAAO,OAAO,EACrF,CAAC,CACF,EACD,oBAAqB,CAGnBO,EAAAA,MAAY,MAAA,MAAA,iDAAA,QAAQ,CACrB,CACF,EAED,QAAS,CAEP,KAAK,mBAAkB,CACxB,EAED,QAAS,CAEP,KAAK,mBAAkB,CACxB,CACH,msBCrOA,GAAG,WAAWC,CAAe"}