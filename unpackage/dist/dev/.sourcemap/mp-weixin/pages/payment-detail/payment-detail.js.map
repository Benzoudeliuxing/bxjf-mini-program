{"version":3,"file":"payment-detail.js","sources":["pages/payment-detail/payment-detail.vue","pages/payment-detail/payment-detail.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"payment-detail-container\">\n    <!-- 头部 -->\n    <view class=\"header\">\n      <view class=\"back-btn\" @click=\"goBack\">\n        <text class=\"back-icon\">←</text>\n      </view>\n      <text class=\"title\">缴费详情</text>\n    </view>\n\n    <!-- 缴费状态卡片 -->\n    <view class=\"status-card\">\n      <view class=\"status-icon\" :class=\"paymentDetail.status\">\n        <text v-if=\"paymentDetail.status === 'paid'\">✓</text>\n        <text v-else-if=\"paymentDetail.status === 'unpaid'\">⏳</text>\n        <text v-else>✗</text>\n      </view>\n      <text class=\"status-text\">{{ getStatusText(paymentDetail.status) }}</text>\n      <text class=\"amount\">¥{{ formatAmount(paymentDetail.amount) }}</text>\n    </view>\n\n    <!-- 缴费信息 -->\n    <view class=\"info-section\">\n      <view class=\"section-title\">缴费信息</view>\n      <view class=\"info-list\">\n        <view class=\"info-item\">\n          <text class=\"label\">缴费项目</text>\n          <text class=\"value\">{{ paymentDetail.title }}</text>\n        </view>\n        <view class=\"info-item\">\n          <text class=\"label\">缴费金额</text>\n          <text class=\"value amount-text\"\n            >¥{{ formatAmount(paymentDetail.amount) }}</text\n          >\n        </view>\n        <view class=\"info-item\">\n          <text class=\"label\">订单号</text>\n          <text class=\"value order-no\">{{ paymentDetail.orderNo }}</text>\n        </view>\n        <view class=\"info-item\">\n          <text class=\"label\">缴费时间</text>\n          <text class=\"value\">{{ formatDate(paymentDetail.paymentTime) }}</text>\n        </view>\n        <view class=\"info-item\">\n          <text class=\"label\">缴费方式</text>\n          <text class=\"value\">{{\n            paymentDetail.paymentMethod || \"微信支付\"\n          }}</text>\n        </view>\n        <view class=\"info-item\">\n          <text class=\"label\">备注</text>\n          <text class=\"value\">{{ paymentDetail.description || \"无\" }}</text>\n        </view>\n      </view>\n    </view>\n\n    <!-- 操作按钮 -->\n    <view class=\"action-section\" v-if=\"paymentDetail.status === 'unpaid'\">\n      <button class=\"pay-btn\" @click=\"goToPay\">立即缴费</button>\n    </view>\n\n    <!-- 缴费记录 -->\n    <view class=\"record-section\" v-if=\"paymentDetail.status === 'paid'\">\n      <view class=\"section-title\">缴费记录</view>\n      <view class=\"record-item\">\n        <view class=\"record-header\">\n          <text class=\"record-title\">支付成功</text>\n          <text class=\"record-time\">{{\n            formatDate(paymentDetail.paymentTime)\n          }}</text>\n        </view>\n        <view class=\"record-detail\">\n          <text class=\"detail-text\"\n            >支付方式：{{ paymentDetail.paymentMethod || \"微信支付\" }}</text\n          >\n          <text class=\"detail-text\"\n            >交易流水：{{ paymentDetail.transactionId || \"暂无\" }}</text\n          >\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { formatAmount } from \"@/utils/payment.js\";\n\nexport default {\n  name: \"PaymentDetail\",\n  data() {\n    return {\n      recordId: null,\n      orderNo: \"\",\n      paymentDetail: {\n        id: null,\n        title: \"\",\n        amount: 0,\n        status: \"unpaid\",\n        paymentTime: null,\n        orderNo: \"\",\n        description: \"\",\n        paymentMethod: \"微信支付\",\n        transactionId: \"\",\n      },\n    };\n  },\n  methods: {\n    formatAmount,\n\n    goBack() {\n      uni.navigateBack();\n    },\n\n    getStatusText(status) {\n      const statusMap = {\n        paid: \"缴费成功\",\n        unpaid: \"待缴费\",\n        failed: \"缴费失败\",\n      };\n      return statusMap[status] || \"未知状态\";\n    },\n\n    formatDate(dateString) {\n      if (!dateString) return \"待缴费\";\n      const date = new Date(dateString);\n      return date.toLocaleString(\"zh-CN\", {\n        year: \"numeric\",\n        month: \"2-digit\",\n        day: \"2-digit\",\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n        second: \"2-digit\",\n      });\n    },\n\n    goToPay() {\n      // 跳转到缴费页面\n      uni.navigateTo({\n        url: `/pages/payment/payment?orderNo=${this.orderNo}&amount=${this.paymentDetail.amount}&title=${this.paymentDetail.title}`,\n      });\n    },\n\n    loadPaymentDetail() {\n      // 模拟数据 - 实际应该从API获取\n      const mockData = {\n        1: {\n          id: 1,\n          title: \"2024年春季学费\",\n          amount: 500000,\n          status: \"paid\",\n          paymentTime: \"2024-03-15 14:30:25\",\n          orderNo: \"PAY202403150001\",\n          description: \"2024年春季学期学费缴纳\",\n          paymentMethod: \"微信支付\",\n          transactionId: \"WX20240315143025001\",\n        },\n        2: {\n          id: 2,\n          title: \"2024年住宿费\",\n          amount: 300000,\n          status: \"paid\",\n          paymentTime: \"2024-02-28 09:15:10\",\n          orderNo: \"PAY202402280002\",\n          description: \"2024年春季学期住宿费\",\n          paymentMethod: \"微信支付\",\n          transactionId: \"WX20240228091510002\",\n        },\n        3: {\n          id: 3,\n          title: \"2024年秋季学费\",\n          amount: 500000,\n          status: \"unpaid\",\n          paymentTime: null,\n          orderNo: \"PAY202409010003\",\n          description: \"2024年秋季学期学费\",\n          paymentMethod: \"微信支付\",\n          transactionId: \"\",\n        },\n        4: {\n          id: 4,\n          title: \"教材费\",\n          amount: 80000,\n          status: \"paid\",\n          paymentTime: \"2024-03-10 16:45:30\",\n          orderNo: \"PAY202403100004\",\n          description: \"2024年春季教材费用\",\n          paymentMethod: \"微信支付\",\n          transactionId: \"WX20240310164530004\",\n        },\n        5: {\n          id: 5,\n          title: \"实验费\",\n          amount: 120000,\n          status: \"unpaid\",\n          paymentTime: null,\n          orderNo: \"PAY202403200005\",\n          description: \"2024年春季实验课程费用\",\n          paymentMethod: \"微信支付\",\n          transactionId: \"\",\n        },\n      };\n\n      // 根据ID或订单号获取详情\n      let detail = null;\n      if (this.recordId && mockData[this.recordId]) {\n        detail = mockData[this.recordId];\n      } else {\n        // 根据订单号查找\n        for (const key in mockData) {\n          if (mockData[key].orderNo === this.orderNo) {\n            detail = mockData[key];\n            break;\n          }\n        }\n      }\n\n      if (detail) {\n        this.paymentDetail = { ...detail };\n      } else {\n        uni.showToast({\n          title: \"未找到缴费记录\",\n          icon: \"none\",\n        });\n      }\n    },\n  },\n\n  onLoad(options) {\n    // 接收页面参数\n    if (options.id) {\n      this.recordId = parseInt(options.id);\n    }\n    if (options.orderNo) {\n      this.orderNo = options.orderNo;\n    }\n\n    // 加载缴费详情\n    this.loadPaymentDetail();\n  },\n};\n</script>\n\n<style scoped>\n.payment-detail-container {\n  padding: 20rpx;\n  background-color: #f5f5f5;\n  min-height: 100vh;\n}\n\n.header {\n  display: flex;\n  align-items: center;\n  padding: 20rpx 0;\n  margin-bottom: 20rpx;\n}\n\n.back-btn {\n  width: 80rpx;\n  height: 80rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #fff;\n  border-radius: 50%;\n  margin-right: 20rpx;\n}\n\n.back-icon {\n  font-size: 36rpx;\n  color: #333;\n}\n\n.title {\n  font-size: 36rpx;\n  font-weight: bold;\n  color: #333;\n}\n\n.status-card {\n  background-color: #fff;\n  border-radius: 20rpx;\n  padding: 60rpx 40rpx;\n  text-align: center;\n  margin-bottom: 20rpx;\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\n}\n\n.status-icon {\n  width: 120rpx;\n  height: 120rpx;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 0 auto 20rpx;\n  font-size: 60rpx;\n  color: #fff;\n}\n\n.status-icon.paid {\n  background-color: #52c41a;\n}\n\n.status-icon.unpaid {\n  background-color: #fa8c16;\n}\n\n.status-icon.failed {\n  background-color: #ff4d4f;\n}\n\n.status-text {\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #333;\n  margin-bottom: 20rpx;\n  display: block;\n}\n\n.amount {\n  font-size: 48rpx;\n  font-weight: bold;\n  color: #ff6b35;\n}\n\n.info-section,\n.record-section {\n  background-color: #fff;\n  border-radius: 20rpx;\n  padding: 40rpx;\n  margin-bottom: 20rpx;\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\n}\n\n.section-title {\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #333;\n  margin-bottom: 30rpx;\n}\n\n.info-list {\n  display: flex;\n  flex-direction: column;\n  gap: 20rpx;\n}\n\n.info-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20rpx 0;\n  border-bottom: 2rpx solid #f0f0f0;\n}\n\n.info-item:last-child {\n  border-bottom: none;\n}\n\n.label {\n  color: #666;\n  font-size: 28rpx;\n}\n\n.value {\n  color: #333;\n  font-size: 28rpx;\n  text-align: right;\n  max-width: 60%;\n}\n\n.amount-text {\n  color: #ff6b35;\n  font-weight: bold;\n}\n\n.order-no {\n  font-family: monospace;\n  color: #999;\n}\n\n.action-section {\n  padding: 40rpx 0;\n}\n\n.pay-btn {\n  width: 100%;\n  height: 100rpx;\n  background-color: #007aff;\n  color: #fff;\n  border-radius: 50rpx;\n  font-size: 32rpx;\n  font-weight: bold;\n  border: none;\n}\n\n.pay-btn:active {\n  background-color: #0056cc;\n}\n\n.record-item {\n  background-color: #f8f8f8;\n  border-radius: 16rpx;\n  padding: 30rpx;\n}\n\n.record-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20rpx;\n}\n\n.record-title {\n  font-size: 28rpx;\n  font-weight: bold;\n  color: #52c41a;\n}\n\n.record-time {\n  font-size: 24rpx;\n  color: #999;\n}\n\n.record-detail {\n  display: flex;\n  flex-direction: column;\n  gap: 10rpx;\n}\n\n.detail-text {\n  font-size: 26rpx;\n  color: #666;\n}\n</style>\n","import MiniProgramPage from '/Users/will/Documents/WillProject/Uni-App/bxjf-mini-program/pages/payment-detail/payment-detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["_sfc_main","formatAmount","uni","status","dateString","mockData","detail","key","options","MiniProgramPage"],"mappings":"2FAuFKA,EAAU,CACb,KAAM,gBACN,MAAO,CACL,MAAO,CACL,SAAU,KACV,QAAS,GACT,cAAe,CACb,GAAI,KACJ,MAAO,GACP,OAAQ,EACR,OAAQ,SACR,YAAa,KACb,QAAS,GACT,YAAa,GACb,cAAe,OACf,cAAe,EAChB,EAEJ,EACD,QAAS,cACPC,EAAY,aAEZ,QAAS,CACPC,EAAG,MAAC,aAAY,CACjB,EAED,cAAcC,EAAQ,CAMpB,MALkB,CAChB,KAAM,OACN,OAAQ,MACR,OAAQ,QAEOA,CAAM,GAAK,MAC7B,EAED,WAAWC,EAAY,CACrB,OAAKA,EACQ,IAAI,KAAKA,CAAU,EACpB,eAAe,QAAS,CAClC,KAAM,UACN,MAAO,UACP,IAAK,UACL,KAAM,UACN,OAAQ,UACR,OAAQ,SACV,CAAC,EATuB,KAUzB,EAED,SAAU,CAERF,EAAAA,MAAI,WAAW,CACb,IAAK,kCAAkC,KAAK,OAAO,WAAW,KAAK,cAAc,MAAM,UAAU,KAAK,cAAc,KAAK,EAC3H,CAAC,CACF,EAED,mBAAoB,CAElB,MAAMG,EAAW,CACf,EAAG,CACD,GAAI,EACJ,MAAO,YACP,OAAQ,IACR,OAAQ,OACR,YAAa,sBACb,QAAS,kBACT,YAAa,gBACb,cAAe,OACf,cAAe,qBAChB,EACD,EAAG,CACD,GAAI,EACJ,MAAO,WACP,OAAQ,IACR,OAAQ,OACR,YAAa,sBACb,QAAS,kBACT,YAAa,eACb,cAAe,OACf,cAAe,qBAChB,EACD,EAAG,CACD,GAAI,EACJ,MAAO,YACP,OAAQ,IACR,OAAQ,SACR,YAAa,KACb,QAAS,kBACT,YAAa,cACb,cAAe,OACf,cAAe,EAChB,EACD,EAAG,CACD,GAAI,EACJ,MAAO,MACP,OAAQ,IACR,OAAQ,OACR,YAAa,sBACb,QAAS,kBACT,YAAa,cACb,cAAe,OACf,cAAe,qBAChB,EACD,EAAG,CACD,GAAI,EACJ,MAAO,MACP,OAAQ,KACR,OAAQ,SACR,YAAa,KACb,QAAS,kBACT,YAAa,gBACb,cAAe,OACf,cAAe,EAChB,GAIH,IAAIC,EAAS,KACb,GAAI,KAAK,UAAYD,EAAS,KAAK,QAAQ,EACzCC,EAASD,EAAS,KAAK,QAAQ,MAG/B,WAAWE,KAAOF,EAChB,GAAIA,EAASE,CAAG,EAAE,UAAY,KAAK,QAAS,CAC1CD,EAASD,EAASE,CAAG,EACrB,KACF,CAIAD,EACF,KAAK,cAAgB,CAAE,GAAGA,GAE1BJ,EAAAA,MAAI,UAAU,CACZ,MAAO,UACP,KAAM,MACR,CAAC,CAEJ,CACF,EAED,OAAOM,EAAS,CAEVA,EAAQ,KACV,KAAK,SAAW,SAASA,EAAQ,EAAE,GAEjCA,EAAQ,UACV,KAAK,QAAUA,EAAQ,SAIzB,KAAK,kBAAiB,CACvB,CACH,69BC9OA,GAAG,WAAWC,CAAe"}